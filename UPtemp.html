<!DOCTYPE HTML>
<html>
    <head>
        <script>
            window.addEventListener('beforeunload', AntiClose);
            
            function AntiClose(event) {
                event.preventDefault();
                event.returnValue = 'Anti Close Popup'; 
            }
        </script>
        
        <style>
        
            body {
                background-color: #ffffff;
                font-family: monospace;
            }

            #Title {
                font-size: 1.75rem;
                font-weight: bold;  
                color:#000000;

                position: absolute;
                margin: 0;
                top: 50%;
                left: 2px;
                transform: translateY(-50%);
                line-height: 0.8;
            }
            
            #TopBar {
                width: 100%;
                height: 40px;
                top: 0px;
                left: 0px;
                background: #9ccfff;
                position: absolute;
            }

            #ReUpload {
                background-color: #ffee00;
                padding: 5px 12px;
                font-size: 0.75rem;
                font-weight: bold;
                border-radius: 30px;
                border: outset #000000;
                border: solid;
                transition: 0.30s ease;

                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                right: 5px;
            }
                
            #ReUpload:hover {
                background-color: #ffc800;
            }
            
            #MainPage {
                top: 40px;
                left: 0px;
                position: absolute;
                
                width: 100%;
                height: calc(100vh - 40px);
                
            }
                        
            input[type="file"] {
                color: transparent;
                width: auto;
                position: fixed;
                bottom: 9999px;
                right: 9999px;
            }
            
        </style>
    </head>

    <body>
        <input type="file" id="hiddenFileInput" name="uploadedFile" accept="text/plain, text/html, .txt, .html">
        
        <div id="TopBar">
            <p id="Title">HTML exec</p>    
            <button id="ReUpload">Change File</button>
        </div>
        
        <iframe id=MainPage title="Embedded HTML Content"></iframe>

        <script>
            document.getElementById("MainPage").srcdoc = InitData;
        </script>
        
        <script>
            document.getElementById("ReUpload").addEventListener("click", ReUpload);
            document.getElementById("hiddenFileInput").addEventListener("change", UponUpload);
            
            
            function ReUpload(event) {
                document.getElementById("hiddenFileInput").click();
            }
            
            async function UponUpload(event){
                const file = event.target.files[0];
                const data = await file.text();
                
                document.getElementById("MainPage").srcdoc = data;
            }
        </script>
    </body>
</html>
